---
title: はじめに - dc とはなにか

---

すべての小学生に awk, sed, dc を学校教育で教えるべきだと思う.

まず, [dc](https://en.wikipedia.org/wiki/Dc_(computer_program)) は正確にはプログラミング言語そのものではない.
そもそも dc とは desk computer の略称で, その名の通り, 電卓のことである.
おそらく皆さんも電卓は触ったことがあるだろう.
物の電卓でなくても, Windows でも iPad でもスマホにでも, 大抵グラフィカルな電卓アプリがプリインストールされており, ちょっとした計算の為に触ったことはあるだろう.

例えば, 4x25 の掛け算をして, その平方根を取るという計算を電卓では次のように行う.

```bash
4x25=√
```

この文字通り一つずつボタンを押していけば, きっとディスプレイには求めていた答え

```bash
10
```

が表示されているはずだ.
というわけで, `4x25√` という 6 文字のコードがいわば, $\sqrt{4 \times 25}$ という計算をさせるためのプログラムコードになっている.
これは本質的には立派にプログラミング言語である（出来ることがそう多くないというだけで）.
dc はこのような電卓よりはほんの少しだけ, 出来ることが多いプログラミング言語である.

さて断っておくべき dc の特徴が２つある. 一つはターミナルコンソールの上で操作するプログラム (CUI) であること.
グラフィカルにボタンが用意されいて, ディスプレイがついている何かが起動するわけではない.
コマンドはキーボードから直接入力する.

dc をオプションなしで呼ぶとインタプリタが起動する.

```bash

```

起動してもいっさい何も表示されない.
これはあなたの入力待ちの状態だ.
入力できるコマンドは四則演算したり平方根を計算したりなどあるが, 最も基本的な操作は数値の入力だ.

```bash
4
```

`4` と入力してエンターしてみる.
これで正しく `4` というコマンドが実行されたのだが, あなたの予想に反して, 何の反応も得られない.
電卓であればここでディスプレイに `4` と表示してくれているはずだろう.
しかし dc ではこちらから明示的に表示させるコマンドを入力しない限りは何も表示しない.
`f` が電卓で言う「ディスプレイ」の状態を表示するコマンドだ.
そこで続けて `f` と入力してみよう.

```bash
4  # さっきの入力
f  # 続けてこれを入力
4
```

`# ...` は説明のために補足したコメントである.
上の三行の内, 1行目と2行目はユーザーが入力したコマンド, 3行目は dc が表示してくれた文字列.
この区別が無いのは説明する上では不便なので, この文章の中でのルールとして,
行頭が `>` で始まる行はユーザーによる入力だということにする.
さっきの三行は次のように書く.

```bash
> 4
> f
4
```

さて, dc にはもう一つ, 大きな特徴がある.
dc はスタックマシンの上で計算するプログラムであるということだ.
大抵の電卓は, よく見慣れた数式を出来るだけそのまま入力させる形式を採用している.
先程の例を使うと, 電卓では $4 \times 25$ という計算をさせるのに,

```
4x25=
```

と入力した. これはほとんど数式そのままだ.
最後の `=` はご存知のように, いわばエンターキーのようなもので, 一旦そこまでの計算を確定し, 実行させる程度の意味の終端記号に過ぎない.
（ちょうど, C/C++ のセミコロン, Python/Ruby の改行のようなものに類推できる.）
さて, `=` を押した時点で `100` という数値がディスプレイに表示されている.
ここで `√` を押すとどうなるか, 実験してみよう.
ディスプレイに表示された数値が, その平方根を取った値（ここでは `10`）で置き換えられる.
これは少し奇妙だぞ.
だって, あなたは $\sqrt{100}$ という数式の代わりに $100 \sqrt{}$ と書いた本を見たことがあるだろうか.
ということは,

- $\sqrt{}$ に関しては数式通りではない
- $\sqrt{}$ はディスプレイに表示してる数値に対して「作用する」コマンドに過ぎない

ということが分かるだろう.
このことを理解してもらえれば, スタックマシンとはなにかの序くらいは理解して頂いたことになる.
スタックマシンは, 足し算も, 何もかも, この方式で行っていることに過ぎない.
例えば dc で $\sqrt{100}$ は次で行う.

```bash
> 100  # 100 を入力した
> v    # 平方根を取る
> f    # 表示させる
10
```

これが何をしているのか手順通りに説明すると次のとおりだ.

1. スタックに `100` を詰む
2. 平方根を取る
3. スタックの中身を表示する

さらに, dc はコマンドとコマンドの間に一つずつ改行を入れないといけないわけではない.
くっつけて書いてしまってもいい.

```bash
> 100vf
10
```

とりあえず, ここまでを Hello World ということにする.
