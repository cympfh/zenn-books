---
title: ブロック式

---

文と式という言葉を使ってきました.
大雑把に言えば文とは何らかの宣言をする副作用が主体のコマンドであって, コレ自体を評価しても値を返すものではありません. ただ環境に新しい変数を登録するなどをします. 一方で式は副作用は無く, 評価をすると一つのデータを返すものです.
構造体や関数の宣言は文ですし, 計算式や関数適用は式です.

ゼロ個以上の文とちょうど一つの式をまとめ上げるとき, cumin ではこれを一つの式として扱います.  これをするのに `{}` で括ってこれを **ブロック式** と呼びます.

```rust
{
    let f(x: _) = x + 1;
    f(0)
}
```

これは関数宣言という一つの文と関数適用という一つの式を括った一つのブロック式です. 式なのでこれを評価しても環境は何も変化せずに一つのデータを返します. 返すデータはあなたの予想通り, `1` という自然数です. 一方で環境は何も変わらないと言いました. `f(0)` を計算する時点では関数 `f` が新たに環境に登録されているはずです. しかしそれは `{}` の中を評価する間の話で, 評価が終わると cumin は関数 `f` のことを忘れます. これは関数だけでなく構造体や列挙体の宣言でも同じです. `{}` はこれらの宣言に限定的な **スコープ**  を与えているとも言う事ができます.

```rust
{
    struct S{}
    enum Z{}
    let f() = 0;
    // S, Z, f はここでしか参照できない
    1
}
```

ブロック式は式なので今まで `<EXPR>` と書いてきたところに自由に書けます.
変数宣言の右辺, 関数宣言の右辺, 構造体や関数のそのデフォルト値にブロック式を置くことが出来ます.

例えば次は関数の右辺がブロック式です.

```rust
let f(x: Int) = {
    let z = 1;
    x + z
};
```

この `{}` は関数宣言のための特別な文法でもなんでもありません.  末尾に `;` を置くことを忘れないでください.



