---
title: 文字列

---

## 文字列リテラル

`"` で括ったデータが文字列データとして扱われます.

```rust
"Hello, World"
```

型は `String` です.

`"` 自体を文字として含みたい場合, またいくつかの特殊な文字は `\` をプレフィックスとするエスケープ文字によって実現します.

| エスケープ | 文字       |
|------------|------------|
| `\\`       | `\`        |
| `\"`       | `"`        |
| `\'`       | `'`        |
| `\n`       | 改行 (CR)  |
| `\r`       | 改行 (RET)
| `\t`       | タブ文字   |

### 複数行文字列

`\n` によって改行を含めても良いのですが, 直接, 文字列リテラルの中に改行することも許されます. その場合でも変わらず `"` で括るだけです.

```rust
"Hello,
World"
```

## 環境変数

大抵のOSには環境変数というシステムの変数があります.  そしてこれは直接的には文字列です.  cumin はこれを文字列データとして参照することが出来ます.

> 現在 `wasm` ブランチでは wasm 版も提供していますが, wasm では環境変数という仕組みはありません. wasm 版 cumin では環境変数を参照しようとするとエラーを起こします.

例えば Unix 系のシステム (Linux, MacOS) では `$USER` という名前でシステムのユーザー名が格納されています. cumin でこれを参照するにはやはり `$USER` と書くだけです.

```rust
$USER
```

次のように `{}` で括って書くことも出来ます.  ちょうどシェルスクリプトと同じですね.

```sh
${USER}
```

これは文字列が格納された定数として使うことが出来ます.

### 文字列以外を環境変数で渡したい

環境変数は常に文字列データです. しかしそれ以外のデータを与えたい場合もあります.
`as` によって型キャストをすることができます.
例えば `$X` に整数値が入っていることを期待する場合は

```rust
$X as Int
```

として参照すればよいです. 整数としてパースできないような文字列が入っている場合には実行時エラーが起きます.

### デフォルト値つき環境変数

シェルスクリプトから環境変数を参照する場合, セットされていない（宣言されていない）場合にデフォルト値を指定しつつ参照する方法が用意されています. cumin でも全く同様の文法で同じことが出来ます.

次の例では `$X` という環境変数を参照しつつ, セットされていない場合は `"abc"` という文字列を返します.

```sh
${X:-abc}
```

## 演算

| 演算 | 記号 | 意味       | 例                    |
|------|------|------------|-----------------------|
| $+$  | `+`  | 文字列結合 | `"Hello, " + "world"` |

