---
title: "ルービックキューブのソルバーを書いた"
emoji: "🎲"
type: "idea"
topics: ["ルービックキューブ", "スピードキューブ", "パズル"]
published: false
---

## 先行研究

- [Cube Explorer](http://kociemba.org/cube.htm)
    - [Cube Explorerの使い方！ダウンロードから基本機能の使い方、手順作成まで徹底解説](https://mstblog.hatenablog.com/entry/cubeexplorer)
- [プログラマーがルービックキューブをやるメリット](https://zenn.dev/kyome/articles/1ad48b4c5ee45e)

## 概要

- 3x3x3 ルービックキューブのソルバーを書いた
  - [cympfh/cube](https://github.com/cympfh/cube)
  - CUI です
- 探索に用いる操作はユーザーが選択する
  - 回しやすい手順に的を絞れる
- 双方向探索で探す
  - 3~5 種の操作, 18手迄の全ての操作が1分から5分程度が探索を完了する
      - TODO(あとで計測しておく)

## 前置き

普通の, 3x3x3 のルービックキューブのためのソルバーを書いた.

ルービックキューブを速く解くにあたって, ほとんど全人類が **CFOP** という手順に従っている. これは4つの手順の頭文字を取ったものである. さらにその一つ一つの手順を細かく分解することもできるが, とにかく, おおよそは決まりきった手順があるということだ.

各手順では「パターン認識をする」「パターンにあった **アルゴリズム** を回す」を従順なロボットのように実行する. ここでアルゴリズムとは, 「右の層を反時計回りに90度回す」「上の層を時計回りに90度回す」といった操作を一列に並べた有限長の列のことをいう. プログラミングで言うアルゴリズムより狭い意味で言っていて, ループや条件分岐も何もない, 有限個のコマンドを直列に実行することを言う.

では良いアルゴリズムとは何かだ. 速く解くことが目標なら短かければ短かいほど良いように思える. しかし実際には回し易さを考慮する必要があって, 難しい. 右利きの人にとっては, 左手ではキューブをがっちり押さえるだけで, 右手で細やかな操作をするというアルゴリズムが回しやすい. また一つ前のコマンドからの流れで回し易い回し難いもあり, 数値化は容易ではない (正にそういう研究を見たこともあるけど忘れた). 最短であれば良いわけではなく, そこから数手増えたとしても結果的に高速に回せるケースはいくらでもある.

自分で使うアルゴリズムは自分で整備するという楽しみがある.
読者の多くはきっとこう思ったはずで, でも "ルービックキューブ 解き方" で調べればいくらでも丁寧な手順書がインターネットにはあって, その "アルゴリズム" とやらも紹介されている, と. 拘りのあるところであれば, そのアルゴリズムもわざわざ複数通り紹介されている, と. 実際それはそうで, オススメなのは [jperm.net](https://jperm.net/algs/pll) だ. 定番なもの一つが紹介されてあるがクリックすると, 他のアルゴリズムが表示される. そこに欲しいものが無ければ自分で追加もできる. しかし web ページによって紹介されているものがまるで違うのは結局ベストなアルゴリズムが決まらないことを示唆している. 自分が使うアルゴリズムは自分で選ばないといけない.

次の要件を満たすソルバーが必要だ.

- アルゴリズムに用いるコマンドを自由に選びまたは除外できる
  - 回し難いコマンドをここで除外する
  - 探索空間を減らす目的もある
- 最短なもの一つに拘らず複数のアルゴリズムを提示できる
  - 3つ4つくらいのアルゴリズムを, 人間が実際に回してみて良いものを選ぶ

## 回転記号

ここを参照

- [3x3x3 回転記号 | TRIBO](https://tribox.com/3x3x3/solution/notation/)

## [cympfh/cube](https://github.com/cympfh/cube)

というわけで書いた.

Rust で書かれてある. 手元で試したい方は [rustup](https://rustup.rs/) で Rust をインストールし, 上のレポジトリを手元にクローンしてきて, `cargo run` コマンドで実行するか, または `cargo install --path .` とすれば `cube` という名前のバイナリ実行ファイルが `~/.cargo/bin/` にコピーされるのでこれを実行する.

